<main class="main">
  <div class="content">
    <div class="left-side">
      <h1>Hello, {{ mvp.name }}</h1>
      <p>
        Congratulations on your {{ mvp.mvps }} mvps in position in the
        {{ mvp.team }}! ðŸŽ‰
      </p>
    </div>
    <div class="divider" role="separator" aria-label="Divider"></div>

    <button (click)="onIncreaseMVPs()">Increase MVPs</button>
    <button (click)="onIncreaseAge()">Increase Age</button>

    <button type="button" class="chat-btn" (click)="sendMessage()">
      <svg
        width="32"
        height="32"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z"
          fill="currentColor"
        ></path>
      </svg>
    </button>

    <div *ngIf="showChatInput" class="form-popup" id="myForm">
      <div class="form-container">
        <header class="header" (mousedown)="startDrag($event)">
          <div class="header-content">
            <div class="avatar"></div>
            <div class="header-text">
              <div class="header-name">Noel</div>
              <div class="header-subtitle">AI Assistant</div>
            </div>
          </div>
          <button type="button" class="btn-close" (click)="closeForm()">
            X
          </button>
        </header>

        <section class="chat-section">
          <div id="chat-box">
            <div class="message-wrapper ai">
              <div class="container">
                <div class="flex">
                  <div class="message-avatar"></div>
                  <span class="message-time">9:49 pm</span>
                </div>
                <p class="message ai-message">
                  Hi! I'm Noel, your virtual assistant. How can I help you
                  today?
                </p>
              </div>
            </div>
            <div
              *ngFor="let msg of messages"
              [class]="msg.isAi ? 'message-wrapper ai' : 'message-wrapper user'"
            >
              <div class="container">
                <div *ngIf="msg.isAi" class="flex">
                  <div class="message-avatar"></div>
                  <span class="message-time">{{ msg.time }}</span>
                </div>
                <span *ngIf="!msg.isAi" class="message-time">{{
                  msg.time
                }}</span>
                <p
                  [class]="
                    msg.isAi ? 'message ai-message' : 'message user-message'
                  "
                >
                  {{ msg.text }}
                </p>
              </div>
            </div>
          </div>
        </section>

        <footer class="footer">
          <input
            type="text"
            placeholder="Write.."
            id="user-input"
            [(ngModel)]="userInput"
            (keyup.enter)="sendUserMessage()"
          />
          <button
            type="button"
            class="btn-send"
            (click)="sendUserMessage()"
            [disabled]="isLoading"
          >
            <svg
              *ngIf="!isLoading"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path d="M2 21L23 12L2 3V10L17 12L2 14V21Z" fill="currentColor" />
            </svg>
            <svg
              *ngIf="isLoading"
              class="spinner"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <circle
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="3"
                fill="none"
                opacity="0.25"
              />
              <path
                d="M12 2a10 10 0 0 1 10 10"
                stroke="currentColor"
                stroke-width="3"
                fill="none"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </footer>
        <div class="powered-by">
          <a href="https://www.google.com" target="_blank">Link to FAQ</a>
        </div>
      </div>
    </div>
  </div>
</main>

<router-outlet />
